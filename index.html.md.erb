---
title: Healthwatch
owner: Healthwatch
---

<p class="note warning">
<strong>Warning:</strong>
    The Healthwatch tiles are currently in beta and is intended for evaluation and test purposes only. Do not use this product in a production environment.
    </p>

Healthwatch is currently in a closed Beta. For questions and/or to report an issue please
contact your primary Pivotal contact. See release notes for latest information regarding new features and any breaking
changes.

# Overview

The **Healthwatch** tile consists of a Time series database (TSDB), Grafana and MySQL. It is the place where metrics can 
be stored and visualized. The **Healthwatch Exporter for PAS** connects to the Loggregator RLP endpoint and funnels 
the metrics to a TSDB exposition endpoint. Both of these tiles can be found under the **Healthwatch** 
product on PivNet. While the exporter must be installed on the foundation you wish to monitor, the **Healthwatch** 
tile can be installed on the same foundation or on a different foundation depending upon your desired monitoring configuration. 
More information about possible configurations can be found in the section on Using Healthwatch.

# Architecture

When being used for multi-foundation monitoring, **Healthwatch** and it's exporters will commonly be
deployed as follows:

![alt text](images/ControlPlaneArchitecture.png)

## Healthwatch

The **Healthwatch** tile installs three components: TSDB, Grafana, and MySQL.  MySQL is used only to store the Grafana
settings and does not store any time series data. 

It can be deployed in high availability (HA) mode ( 3 MySQL nodes and 2 Proxy nodes) or in non-HA mode
(1 MySQL node and 1 Proxy node). Grafana may also be scaled horizontally beyond the default single VM. TSDB can be scaled
vertically but should not be scaled horizontally. An Nginx proxy is deployed in front of TSDB to provide authorization to
and encryption of metrics stored in TSDB.

![alt text](images/Healthwatch.png)

## Healthwatch Exporter for PAS

The **Healthwatch Exporter for PAS** installs up to three VMs.  Each VM processes a metric type from the Firehose, either Timer, Gauge or Counter.
An operator can choose to deploy all three VMs or any subset thereof.  Metrics are then exposed on a secured TSDB
exposition format endpoints.  Theses VMs can be scaled vertically but should not be scaled horizontally.

![alt text](images/HealthwatchExporterforPAS.png)

## Healthwatch Exporter for PKS

The **Healthwatch Exporter for PKS** installs a single VM that collects health metrics from the Bosh Director.  It follows a similar path as what was
done in PAS to get health metrics into the Firehose.  Metrics are then exposed on a secured TSDB exposition format endpoint.  This VM can be scaled
vertically but should not be scaled horizontally.

![alt text](images/HealthwatchExporterforPKS.png)

